<div class="bg-white p-6 rounded-md border border-gray-200 mb-6">
  <h3 class="text-lg font-medium mb-4">Add New Rule</h3>
  
  <form hx-post="/api/rulesets/{{ ruleset_id }}/rules" 
      hx-target="#rules-container"
      hx-swap="outerHTML"
      hx-indicator=".htmx-indicator"
      class="space-y-4">
      
      <div class="grid grid-cols-2 gap-4">
          <div>
              <label for="message" class="block text-sm font-medium text-gray-700 mb-1">Message</label>
              <input type="text" id="message" name="message" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary"
                  placeholder="e.g. Walls must have a fire rating" required>
          </div>
          
          <div>
              <label for="severity" class="block text-sm font-medium text-gray-700 mb-1">Severity</label>
              <select id="severity" name="severity" 
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
                  <option value="Error">Error</option>
                  <option value="Warning">Warning</option>
                  <option value="Info">Info</option>
              </select>
          </div>
      </div>
      
      <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Conditions</label>
          
          <div id="conditions-container" class="space-y-3 mb-4">
              <div class="condition-row grid grid-cols-4 gap-3 items-end">
                  <div>
                      <label class="block text-xs text-gray-500 mb-1">Logic</label>
                      <select name="conditions[0][logic]" 
                          class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                          <option value="WHERE">WHERE</option>
                          <option value="AND">AND</option>
                          <option value="OR">OR</option>
                          <option value="CHECK">CHECK</option>
                      </select>
                  </div>
                  
                  <div>
                      <label class="block text-xs text-gray-500 mb-1">Property</label>
                      <input type="text" name="conditions[0][propertyName]" 
                          class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm"
                          placeholder="e.g. speckle_type" required>
                  </div>
                  
                  <div>
                      <label class="block text-xs text-gray-500 mb-1">Predicate</label>
                      <select name="conditions[0][predicate]" 
                          class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                          <option value="==">equals (==)</option>
                          <option value="!=">not equals (!=)</option>
                          <option value=">">greater than (>)</option>
                          <option value="<">less than (<)</option>
                          <option value=">=">greater than or equal (>=)</option>
                          <option value="<=">less than or equal (<=)</option>
                          <option value="contains">contains</option>
                          <option value="not contains">not contains</option>
                          <option value="starts with">starts with</option>
                          <option value="ends with">ends with</option>
                      </select>
                  </div>
                  
                  <div>
                      <label class="block text-xs text-gray-500 mb-1">Value</label>
                      <input type="text" name="conditions[0][value]" 
                          class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm"
                          placeholder="e.g. Wall" required>
                  </div>
              </div>
          </div>
      </div>
      
      <div>
          <button type="button" 
              class="px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300"
              hx-get="/api/rulesets/{{ ruleset_id }}/condition-row/1"
              hx-target="#conditions-container"
              hx-swap="beforeend">
              Add Condition
          </button>
      </div>
      
      <div class="flex justify-between">
          <button type="button" 
              class="px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300"
              hx-get="/api/rulesets/{{ ruleset_id }}/rules"
              hx-target="#rule-form-container"
              hx-swap="innerHTML">
              Cancel
          </button>
          
          <button type="submit" 
              class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700">
              Save Rule
          </button>
      </div>
  </form>
</div>